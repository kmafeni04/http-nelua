local http = require "...http"

local app = http.new()

app:set_static("./static", "static")

app:get("index", "/", function(self: *http.Server)
  local resp = self:html(200, "hello world")
  resp:set_cookie({
    name = "hello",
    value = "bye"
  })
  return resp
end)

app:get("test", "/test", function(self: *http.Server)
  local x, err = self:get_cookie("hello")
  if err ~= "" then
    return self:text(500, err)
  end
  return self:text(200, x)
  
end)


app:serve()
